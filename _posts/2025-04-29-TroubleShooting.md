---
layout: post
comments: true
title:  "트러블 슈팅"
excerpt: "코드 학습"
categories: 
- 유니티
- 스파르타
tags:
- TIL
 
toc_label: 팀프로젝트
toc: true
toc_sticky: true
 
date: 2025-04-29
last_modified_at: 2025-04-29
---

### 📆 오늘의 TIL (Today I Learned)

플레이어 이동중 연속으로 점프키를 입력하면 더블점프가 가능한 문제가 생겼다. 

더블 점프를 추가한적이 없었기에 어떤 부분에서 해당 문제가 발생하는 지 알지 못했다.



해당 원인을 찾기위해 최초 발견 시점부터 거꾸로 거슬러 올라가 문제원인을 찾아 보았다.

##### 가설 1. 점프 버퍼와 관련된 문제

점프 버퍼는 체공 직후 바닥에 닿기전에 선입력을 받아 연속으로 점프가 가능하게 하는 기술이다.

점프 버퍼가 활성화 되는동안 입력된 점프키가 더블점프로 작동했을 수 있다.

->> 점프 버퍼를 줄이거나 늘여서 확인해 보았고 0으로 두었을때 역시 해당 문제가 발생하였기에 원인이 아니다.



##### 가설 2. 코요테 타임으로 인한 점프입력

코요테 타임은 바닥에서 떨어진 직후 잠깐동안 점프 입력을 받을 수 있는 기술이다. 모서리 점프라고 불리는 기술들이 코요테 타임을 참고로 하고 있다. 설정된 코요테 타임은 0.2초 확인을 하기 위해 팀원중 가장 피지컬이 좋은 분을 모셔와 반응속도를 체크하여 실험을 해보았다.

문제는 점프직후 코요테 타임이 활성화 되어 있어 한번 더 점프가 가능하다는 것이다.

원인에 가장 가깝지만 코요테 타임이 0인경우 점프가 되지 않기에 해당 문제는 아닐 것이라 추측하고 다른 원인을 찾아 보았다. ->> 원인에 가장 가까운 후보1



##### 가설 3. 복장 시스템의 잔재

윙슈트를 만들던 도중 점프키와 다양한 조합키를 사용하여 여러 시도를 한적이 있었다. 해당기능은 결국 사라지고 외부에서 조작이 가능하도록 확장하여 해결하였다.

이때 만들어진 기능이 코드로 남아있는 경우 문제가 발생할 수 있다고 생각했다.

그렇게 코드를 살펴보던중 점프로직에서 바닥에서 떨어진 직후를 체크하던 변수가 누락되어 있던 것을 확인 할 수 있었다. 해당 부분에 누락된 코드를 다시 작성하니 문제가 해결되었다.



원인은 결국 가설2가 맞았고 활성화 되어있던 코요테타임을 누락되었던 변수로 초기화 하고 있었다는 것을 알게 되었고 문제를 해결 할 수 있었다.



디버깅로그와 다르게 물리적인 원인을 찾기가 상당히 어렵다는 것을 깨닫게 되었고, 문제를 찾으면 바로 바로 수정하는 습관을 가지도록 해야겠다고 느꼈다. 
