---
layout: post
comments: true
title:  "μ νΈν© κµ¬ν„ν•κΈ°"
excerpt: "μ½”λ“ ν•™μµ"
categories: 
- μ λ‹ν‹°
- μ¤νλ¥΄νƒ€
tags:
- TIL
 
toc_label: ν€ν”„λ΅μ νΈ
toc: true
toc_sticky: true
 
date: 2025-04-14	
last_modified_at: 2025-04-14
---

### π“† μ¤λμ TIL (Today I Learned)

# Unity 2D μ νΈν© μ‹μ¤ν… κµ¬ν„

μ λ‹ν‹° 2D κ²μ„μ—μ„ ν”λ μ΄μ–΄μ—κ² μ νΈν© κΈ°λ¥μ„ μ¶”κ°€ν•μ—¬ μ¤‘λ ¥ μ—†μ΄ μμ λ΅­κ² μ΄λ™ν•  μ μλ” μ‹μ¤ν…μ„ κµ¬ν„ν•΄ λ³΄μ•λ‹¤. ν•΄λ‹Ή κΈ°λ¥μ€ λ©”νΈλ΅λ°”λ‹μ•„ μ¥λ¥΄μΈ ν”„λ΅μ νΈμ—μ„ ν”λ μ΄μ–΄λ¥Ό κ°•ν™”ν•λ” λ°©λ²•μ¤‘ ν•λ‚μ΄λ©° ,μ΅°κ° 4 κ°λ¥Ό λ¨μΌλ©΄ ν•΄κΈλλ” κΈ°λ¥μ΄λ‹¤. ν”λ μ΄μ–΄κ°€ μΌμ‹μ μΌλ΅ λ†’μ€ κ³³ κΉμ§€ μ¬λΌ κ° μ μλ„λ΅ ν•΄λ‹Ή κΈ°λ¥μ„ μ¶”κ°€ν•΄λ³΄μ•λ‹¤.

## μ£Όμ” κµ¬μ„± μ”μ†

### 1. μƒνƒ λ° λ³€μ κ΄€λ¦¬

```csharp
// μ νΈν© μƒνƒ ν”λκ·Έ
private bool hasWingsuit = true;      // μ νΈν© λ³΄μ  μ—¬λ¶€
private bool isJetpackActive = false;  // μ νΈν© ν™μ„±ν™” μƒνƒ

// μ νΈν© μ‹κ°„ λ° μΏ¨νƒ€μ„ κ΄€λ ¨ λ³€μ
private float jetpackMaxDuration = 15f;    // μ νΈν© μµλ€ μ‚¬μ© μ‹κ°„ (μ΄)
private float jetpackCooldown = 40f;       // μ νΈν© μΏ¨νƒ€μ„ (μ΄)
private float jetpackTimer = 0f;           // μ νΈν© μ‚¬μ© μ‹κ°„ νƒ€μ΄λ¨Έ
private float jetpackCooldownTimer = 0f;   // μ νΈν© μΏ¨νƒ€μ„ νƒ€μ΄λ¨Έ
private bool jetpackOnCooldown = false;    // μ νΈν© μΏ¨νƒ€μ„ μƒνƒ ν”λκ·Έ
```

### 2. μ νΈν© μ…λ ¥ μ²λ¦¬ (λ”λΈ” νƒ­ κ°μ§€)

```csharp
// λ”λΈ”νƒ­ κ°μ§€μ© λ³€μ
private float lastUpKeyTime = -10f;
private float doubleTapTimeThreshold = 0.3f;

// μ„ ν™”μ‚΄ν‘ ν‚¤ μ…λ ¥ μ²λ¦¬ λ©”μ„λ“
public void CheckUpKeyDoubleTap()
{
    if (!hasWingsuit) return;
    if (jetpackOnCooldown) 
    {
        Debug.Log("μ νΈν© μΏ¨νƒ€μ„ μ¤‘: " + (jetpackCooldown - jetpackCooldownTimer).ToString("F1") + "μ΄ λ‚¨μ");
        return;
    }
    
    float currentTime = Time.time;
    if (currentTime - lastUpKeyTime < doubleTapTimeThreshold)
    {
        // λ”λΈ”νƒ­ κ°μ§€λ¨
        ToggleJetpackMode();
        lastUpKeyTime = -10f; // μ—°μ† ν™μ„±ν™” λ°©μ§€
    }
    else
    {
        lastUpKeyTime = currentTime;
    }
}
```

### 3. μ νΈν© μƒνƒ κ΄€λ¦¬

#### μ νΈν© ν™μ„±ν™”

```csharp
public void ActivateJetpack()
{
    if (jetpackOnCooldown)
    {
        Debug.Log("μ νΈν©μ΄ μΏ¨νƒ€μ„ μ¤‘μ…λ‹λ‹¤: " + (jetpackCooldown - jetpackCooldownTimer).ToString("F1") + "μ΄ λ‚¨μ");
        return;
    }
    
    isJetpackActive = true;
    jetpackTimer = 0f;
    rb.gravityScale = 0f;  // μ¤‘λ ¥ μ κ±°
    OnJetpackActivated?.Invoke();
    Debug.Log("μ νΈν© ν™μ„±ν™”: " + jetpackMaxDuration + "μ΄ μ‚¬μ© κ°€λ¥");
}
```

#### μ νΈν© λΉ„ν™μ„±ν™”

```csharp
public void DeactivateJetpack()
{
    if (!isJetpackActive) return;
    
    isJetpackActive = false;
    rb.gravityScale = 1f;  // μ¤‘λ ¥ λ³µμ›
    OnJetpackDeactivated?.Invoke();
    Debug.Log("μ νΈν© λΉ„ν™μ„±ν™”: μ‚¬μ© μ‹κ°„ " + jetpackTimer.ToString("F1") + "μ΄");
}
```

### 4. μ νΈν© μ΄λ™ λ΅μ§

```csharp
private void MoveJetpack(Vector2 moveDirection)
{
    // λ°©ν–¥ λ³€κ²½ μ²λ¦¬
    if (moveDirection.x != 0)
    {
        int newDirection = (int)Mathf.Sign(moveDirection.x);
        if (facingDirection != newDirection)
        {
            facingDirection = newDirection;
            transform.localScale = new Vector3(facingDirection, 1, 1);
            OnDirectionChanged?.Invoke(facingDirection);
        }
    }
    
    // μ νΈν© μ΄λ™ μ†λ„ μ„¤μ •
    float jetpackSpeed = settings.moveSpeed * 1.2f;  // μΌλ° μ΄λ™λ³΄λ‹¤ 20% λΉ λ¦„
    Vector2 targetVelocity = new Vector2(moveDirection.x * jetpackSpeed, moveDirection.y * jetpackSpeed);
    
    // λ¶€λ“λ¬μ΄ μ΄λ™μ„ μ„ν• κ°€μ†λ„ μ μ©
    rb.velocity = Vector2.Lerp(rb.velocity, targetVelocity, Time.deltaTime * 5f);
}
```

### 5. νƒ€μ΄λ¨Έ λ° μΏ¨λ‹¤μ΄ κ΄€λ¦¬

```csharp
private void Update()
{
    // μ νΈν© μ‚¬μ© μ¤‘μ΄λ©΄ νƒ€μ΄λ¨Έ μ¦κ°€
    if (isJetpackActive)
    {
        jetpackTimer += Time.deltaTime;
        
        // μµλ€ μ‚¬μ© μ‹κ°„ μ΄κ³Ό μ‹ λΉ„ν™μ„±ν™”
        if (jetpackTimer >= jetpackMaxDuration)
        {
            DeactivateJetpack();
            StartJetpackCooldown();
        }
    }
    
    // μΏ¨νƒ€μ„ μ§„ν–‰ μ¤‘μ΄λ©΄ νƒ€μ΄λ¨Έ μ¦κ°€
    if (jetpackOnCooldown)
    {
        jetpackCooldownTimer += Time.deltaTime;
        
        // μΏ¨νƒ€μ„ μΆ…λ£ μ‹ μ΄κΈ°ν™”
        if (jetpackCooldownTimer >= jetpackCooldown)
        {
            jetpackOnCooldown = false;
            jetpackCooldownTimer = 0f;
            OnJetpackCooldownEnded?.Invoke();
            Debug.Log("μ νΈν© μΏ¨νƒ€μ„ μΆ…λ£");
        }
    }
}
```

### 6. κΈ°μ΅΄ λ©”μ„λ“μ™€μ νΈν™μ„±

```csharp
public void Move(Vector2 moveDirection, bool sprint = false)
{
    // μ νΈν© λ¨λ“μΌ λ•λ” λ‹¤λ¥Έ μ΄λ™ λ΅μ§ μ‚¬μ©
    if (isJetpackActive)
    {
        MoveJetpack(moveDirection);
        return;
    }
    
    // κΈ°μ΅΄ μ΄λ™ λ΅μ§...
}

public void Jump(float force)
{
    // μ νΈν© λ¨λ“μΌ λ•λ” μ ν”„ λ¶κ°€
    if (isJetpackActive) return;
    
    // κΈ°μ΅΄ μ ν”„ λ΅μ§...
}
```

## μ΄λ²¤νΈ μ‹μ¤ν…

μ΄λ²¤νΈλ¥Ό ν†µν•΄ μ νΈν© μƒνƒ λ³€ν™”λ¥Ό λ‹¤λ¥Έ μ‹μ¤ν…(UI, μ‚¬μ΄λ“, νν‹°ν΄ λ“±)μ— μ•λ¦Ό:

```csharp
public event System.Action OnJetpackActivated;
public event System.Action OnJetpackDeactivated;
public event System.Action OnJetpackCooldownStarted;
public event System.Action OnJetpackCooldownEnded;
```

## ν•µμ‹¬ κµ¬ν„ μ”μ†

1. **μ¤‘λ ¥ μ μ–΄**:
   - μ νΈν© ν™μ„±ν™” μ‹ `rb.gravityScale = 0f`λ΅ μ¤‘λ ¥ μ κ±°
   - λΉ„ν™μ„±ν™” μ‹ `rb.gravityScale = 1f`λ΅ μ¤‘λ ¥ λ³µμ›
2. **λ¶€λ“λ¬μ΄ μ΄λ™**:
   - `Vector2.Lerp()`λ¥Ό μ‚¬μ©ν•μ—¬ ν„μ¬ μ†λ„μ—μ„ λ©ν‘ μ†λ„λ΅ λ¶€λ“λ½κ² μ „ν™
   - `Time.deltaTime * 5f` κ°’μΌλ΅ μ „ν™ μ†λ„ μ΅°μ 
3. **μ‚¬μ© μ‹κ°„ μ ν• λ° μΏ¨λ‹¤μ΄**:
   - μµλ€ μ‚¬μ© μ‹κ°„(15μ΄) μ΄ν›„ μλ™ λΉ„ν™μ„±ν™”
   - μ‚¬μ© ν›„ μΏ¨λ‹¤μ΄(40μ΄) λ™μ• μ¬μ‚¬μ© λ¶κ°€
   - νƒ€μ΄λ¨Έλ¥Ό ν†µν• μ‹κ°„ κ΄€λ¦¬
4. **μ§κ΄€μ μΈ μΈν„°νμ΄μ¤**:
   - μ„ ν‚¤ λ”λΈ”νƒ­μΌλ΅ ν™μ„±ν™”/λΉ„ν™μ„±ν™”
   - ν™μ„±ν™” μƒνƒμ—μ„ λ°©ν–¥ν‚¤λ΅ μμ λ΅­κ² μ΄λ™

## μ‘μ© λ° ν™•μ¥ κ°€λ¥μ„±

1. **νν‹°ν΄ ν¨κ³Ό**: OnJetpackActivated μ΄λ²¤νΈμ— νν‹°ν΄ μ‹μ¤ν… μ—°κ²°ν•μ—¬ μ‹κ°μ  ν¨κ³Ό μ¶”κ°€
2. **μ—°λ£ μ‹μ¤ν…**: μ‹κ°„ μ ν• λ€μ‹  μ—°λ£ κ²μ΄μ§€ μ‹μ¤ν…μΌλ΅ ν™•μ¥ κ°€λ¥ + μ°¨ν›„ μ¶”κ°€λ  μ‹μ¤ν…
3. **μ—…κ·Έλ μ΄λ“ μ‹μ¤ν…**: μµλ€ μ§€μ† μ‹κ°„, μ΄λ™ μ†λ„, μΏ¨λ‹¤μ΄ μ‹κ°„ λ“±μ„ μ—…κ·Έλ μ΄λ“ν•  μ μλ” μ‹μ¤ν…
4. **μ¶©λ λ¬Όλ¦¬**: λ²½μ— λ¶€λ”ν λ• ν•κ²¨λ‚κ°€λ” λ¬Όλ¦¬ ν¨κ³Ό μ¶”κ°€

## κµ¬ν„ μ‹ μ£Όμμ‚¬ν•­

1. μ νΈν© μ‚¬μ© μ¤‘ κΈ°μ΅΄ μ΄λ™/μ ν”„ λ©”μ»¤λ‹μ¦κ³Όμ μ¶©λ λ°©μ§€
   - λ‹¤μ–‘ν• ν‚¤ μ»¤λ§¨λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ‘λ™μ„ μ‹λ„ ν•΄ λ³΄μ•μΌλ‚ μ‘λ™μ— μ¶©λμ΄ λ‚λ”μ§€ μ‘λ™ν•μ§€ μ•λ” λ¬Έμ κ°€ μλ‹¤.

1. UIλ¥Ό ν†µν• ν„μ¬ μ νΈν© μƒνƒ λ° λ‚¨μ€ μ‹κ°„/μΏ¨λ‹¤μ΄ ν‘μ‹ ν•„μ”

1. μ νΈν© μ‚¬μ© κ°€λ¥/λ¶κ°€λ¥ μƒνƒλ¥Ό ν”λ μ΄μ–΄μ—κ² λ…ν™•ν μ „λ‹¬
2. λ°Έλ°μ¤ μ΅°μ •: μ‚¬μ© μ‹κ°„, μΏ¨λ‹¤μ΄, μ΄λ™ μ†λ„λ” κ²μ„ν”λ μ΄ ν…μ¤νΈλ¥Ό ν†µν•΄ μ΅°μ • ν•„μ”

## κ²°λ΅ 

ν”λ«ν¬λ¨Έμ—μ„ κ³µμ¤‘μ΄λ™μ€ λ°Έλ°μ¤λ¥Ό ν•΄μΉ  λ§νΌ λ§¤μ° κΈ°λ™μ„±μ΄ μΆ‹μ€ μ΄λ™ λ°©λ²•μ΄λ‹¤. 

ν•΄λ‹Ή κΈ°λ¥μ„ μ‚¬μ©ν•κΈ° μ„ν•΄ κΉλ‹¤λ΅μ΄ μ΅°κ±΄μ„ κ±Έ ν•„μ”κ°€ μλ‹¤.

μ΅°κ±΄κ³Ό μ‘λ™ λ°©μ‹μ΄ λ³µμ΅ν•΄ μ§ μλ΅ μ½”λ“λν• λ³µμ΅ν•΄μ§€κΈ°μ— κΈ°λ¥ μ„ κµ¬λ¶„ν•μ—¬ λ‚λ ν•„μ”λ¥Ό λκΌλ‹¤.
