---
layout: post
comments: true
title: 벽타기중 공격 트러블 슈팅
excerpt: 코드 학습
categories:
  - 유니티
  - 스파르타
tags:
  - TIL
toc_label: 팀프로젝트
toc: true
toc_sticky: true
date: 2025-04-30
last_modified_at: 2025-04-30
---

### 📆 오늘의 TIL (Today I Learned)

벽타기중에 공격 방향을 바꿔야 하는데, 기존에 사용하려고 했던 방법은, 플레이어나, 발사위치를 반전시키는 것으로 해결 하려고 했었는데

가끔은 아주 단순한 사고가 필요하다는 것을 알게 되었다.

플레이어가 좌우에 따라 Scale 값이 바뀌게 되니 , 자식으로 들어 있는 발사위치등이 반전되어 벽타기 상태에서 벽을 향해 발사하게 되었다. 이를 해결 하고자 자식만 반전을 하려고 했으나, 플레이어가 벽과 반대방향으로 벽을 타게되는 문제가 추가되게 되었다.

생각해보니 플레이어는 방향을 바라보고 있는 향해 총알을 발사하게 되는데 해당 방향만 바꿔줄 수 있으면 아주 간단히 해결되는 문제였다.

이와 마찬가지로 구조를 리팩토링하고자 상태머신을 분리했는데, 내가 원했던 것은 이동입력중에 공격을 할 수 있게 하고 싶었다. 그러나 기존에 작동하던 슬라이드나 ,다른기능이 코드가 분리됨에 따라 참조하는 곳이 달라져 코드가 복잡하게 되어버려 오히려 리팩토링 전보다 알아보기도 힘들게 되었다.

다시 코드를 롤백하고 요구사항을 다시 분석해 보았다.

플레이어는 이동을 하고 있고 현재 상태는 공격 입력시 공격bool 값이 키를 누르는 동안만 한번 활성화 되고 있어, 해당 기능을 사용할 수 없었고, 이를 공격버튼을 누르고 있는동안 지속되게 바꾸었다.
이동과 ,공격이 둘다 활 성화 되었을때, 이동공격 애니메이션을 작동시키게 했더니 잘 작동했다.

처음 설계를 잘 해야 겠다는 생각과, 어떻게 단순하게 적용할 수 있는지 생각의 유연함의 중요성을 다시금 알게되는 하루 였다.