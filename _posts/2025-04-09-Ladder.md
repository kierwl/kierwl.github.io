---
layout: single
comments: true
title:  "ì‚¬ë‹¤ë¦¬ êµ¬í˜„í•˜ê¸°"
excerpt: "ì½”ë“œ í•™ìŠµ"
categories: 
- ìœ ë‹ˆí‹°
- ìŠ¤íŒŒë¥´íƒ€
tags:
- TIL
 
toc_label: íŒ€í”„ë¡œì íŠ¸
toc: true
toc_sticky: true
 
date: 2025-04-09
last_modified_at: 2025-04-09
---

### ğŸ“† ì˜¤ëŠ˜ì˜ TIL (Today I Learned)

# Unityì—ì„œ ë ˆí¼ëŸ°ìŠ¤ ê²Œì„ ë¡ë§¨ ì˜ ì‚¬ë‹¤ë¦¬ íƒ€ê¸° êµ¬í˜„í•˜ê¸°

ì˜¤ëŠ˜ì€ Unity 2D ê²Œì„ì—ì„œ ë¡ë§¨ ì‹œë¦¬ì¦ˆì²˜ëŸ¼ ìì—°ìŠ¤ëŸ¬ìš´ ì‚¬ë‹¤ë¦¬ íƒ€ê¸° ì‹œìŠ¤í…œì„ êµ¬í˜„í•´ ë³´ë ¤ê³  í–ˆë‹¤. 

## ì‚¬ë‹¤ë¦¬ íƒ€ê¸°ì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œ

1. ìƒíƒœ ê¸°ë°˜ ìºë¦­í„° ì œì–´
   - PlayerStateManagerë¡œ ìƒíƒœ ì „í™˜ ê´€ë¦¬
   - PlayerClimbingStateê°€ ì‚¬ë‹¤ë¦¬ ìƒíƒœì¼ ë•Œ ë¡œì§ ì²˜ë¦¬
   - ì¶©ëŒ, ì…ë ¥, ë¬¼ë¦¬ ë“±ì„ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬
2. ë¡ë§¨ ìŠ¤íƒ€ì¼ ì• ë‹ˆë©”ì´ì…˜
   - ì›€ì§ì¼ ë•Œë§Œ 4í”„ë ˆì„ ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
   - ì •ì§€ ì‹œ í˜„ì¬ í”„ë ˆì„ì—ì„œ ë©ˆì¶¤
   - ìƒí•˜ ì´ë™ì— ì§‘ì¤‘ëœ ì›€ì§ì„
3. ì¶©ëŒ ì²˜ë¦¬
   - íŠ¸ë¦¬ê±° ì˜ì—­ìœ¼ë¡œ ì‚¬ë‹¤ë¦¬ ê°ì§€
   - ìƒíƒœì— ë”°ë¥¸ ì¶©ëŒ ë¬´ì‹œ/í™œì„±í™”
   - ì‚¬ë‹¤ë¦¬ ëì— ë„ë‹¬í–ˆì„ ë•Œ ìƒíƒœ ì „í™˜

## ì£¼ìš” ìŠ¤í¬ë¦½íŠ¸ì™€ ì—­í• 

- **LadderController**: ì‚¬ë‹¤ë¦¬ ìì²´ì˜ ë™ì‘ì„ ì œì–´

- **PlayerClimbingState**: í”Œë ˆì´ì–´ê°€ ì‚¬ë‹¤ë¦¬ë¥¼ íƒˆ ë•Œì˜ ìƒíƒœ ê´€ë¦¬
- **PlayerAnimator**: ì‚¬ë‹¤ë¦¬ ì• ë‹ˆë©”ì´ì…˜ì„ ì œì–´í•˜ê³  í”„ë ˆì„ ì²˜ë¦¬

```
// ì‚¬ë‹¤ë¦¬ ì˜¤ë¸Œì íŠ¸ê°€ í”Œë ˆì´ì–´ ê°ì§€
private void OnTriggerEnter2D(Collider2D collision)
{
    // í”Œë ˆì´ì–´ ë ˆì´ì–´ í™•ì¸
    if (IsPlayerLayer(collision.gameObject.layer))
    {
        currentPlayer = collision.gameObject
    // í”Œë ˆì´ì–´ì—ê²Œ ì‚¬ë‹¤ë¦¬ ì˜ì—­ì— ìˆë‹¤ê³  ì•Œë¦¼
    PlayerStateManager stateManager = currentPlayer.GetComponent<PlayerStateManager>();
    if (stateManager != null)
    {
        // ì‚¬ë‹¤ë¦¬ ê·¼ì²˜ì— ìˆìŒì„ ì•Œë¦¼
        stateManager.SetNearLadder(true, transform.position);
    }
}
```

    // ì‚¬ë‹¤ë¦¬ ìƒíƒœ ì„¤ì • ë©”ì„œë“œ
    public void SetNearLadder(bool isNear, Vector2 ladderPosition)
    {
        isNearLadder = isNear;
        nearestLadderPosition = ladderPosition;
    }
    
    // ì‚¬ë‹¤ë¦¬ íƒ€ê¸° ìƒíƒœë¡œ ì „í™˜í•˜ëŠ” ë©”ì„œë“œ
    public void EnterClimbingState()
    {
        // ì´ë¯¸ ì‚¬ë‹¤ë¦¬ íƒ€ëŠ” ì¤‘ì´ë©´ ë¬´ì‹œ
        if (currentState != null && currentState.GetType() == typeof(PlayerClimbingState))
            return;
            
    // ì‚¬ë‹¤ë¦¬ ê·¼ì²˜ì— ìˆì„ ë•Œë§Œ ìƒíƒœ ì „í™˜
    if (isNearLadder)
    {
        // í˜„ì¬ ì†ë„ ì´ˆê¸°í™”
        Rigidbody2D rb = GetComponent<Rigidbody2D>();
        if (rb != null)
        {
            rb.velocity = Vector2.zero;
        }
        
        // ì‚¬ë‹¤ë¦¬ íƒ€ê¸° ìƒíƒœë¡œ ì „í™˜
        ChangeState(PlayerStateType.Climbing);
    }

    
    public override void Enter()
    {
        // ì¤‘ë ¥ ì €ì¥ ë° ë¹„í™œì„±í™”
        var rigidbody = player.GetComponent<Rigidbody2D>();
        if (rigidbody != null)
        {
            originalGravity = new Vector2(rigidbody.gravityScale, Physics2D.gravity.y);
            rigidbody.gravityScale = 0f;  // ì¤‘ë ¥ ë¹„í™œì„±í™”ë¡œ ì‚¬ë‹¤ë¦¬ì—ì„œ ë–¨ì–´ì§€ì§€ ì•ŠìŒ
            rigidbody.velocity = Vector2.zero;
        }
        // ì‚¬ë‹¤ë¦¬ ì˜¤ë¥´ê¸° ìƒíƒœ í”Œë˜ê·¸ ì„¤ì •
        player.SetClimbing(true);
    
        // ì´ˆê¸°ì—ëŠ” ì›€ì§ì´ì§€ ì•ŠëŠ” ìƒíƒœë¡œ ì‹œì‘
        isMoving = false;
        if (playerAnimator != null)
        {
            playerAnimator.SetClimbing(true);
            playerAnimator.SetActuallyClimbing(false);
        }
    }



    // ì‹¤ì œ ì‚¬ë‹¤ë¦¬ ì˜¤ë¥´ê¸° ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ ì œì–´ - ë¡ë§¨ ìŠ¤íƒ€ì¼
    public void SetActuallyClimbing(bool isActuallyClimbing)
    {
        if (animator == null) return;
     
        this.isActuallyClimbing = isActuallyClimbing;
    
        if (HasParameter("IsActuallyClimbing"))
        {
            animator.SetBool("IsActuallyClimbing", isActuallyClimbing);
        }
    
        // ì›€ì§ì„ ìœ ë¬´ì— ë”°ë¼ ì• ë‹ˆë©”ì´ì…˜ ì¼ì‹œì •ì§€/ì¬ê°œ
        if (isActuallyClimbing && isPaused)
        {
            // ì›€ì§ì´ê¸° ì‹œì‘í•˜ë©´ ì• ë‹ˆë©”ì´ì…˜ ì¬ê°œ
            ResumeAnimation();
        }
        else if (!isActuallyClimbing && !isPaused)
        {
            // ì›€ì§ì„ì´ ì—†ì„ ë•ŒëŠ” í˜„ì¬ í”„ë ˆì„ ìœ ì§€
            PauseAnimation();
        }
    }
    
    // ì• ë‹ˆë©”ì´ì…˜ ì¼ì‹œì •ì§€ - ë¡ë§¨ ìŠ¤íƒ€ì¼
    private void PauseAnimation()
    {
        if (animator == null || isPaused) return;
        
    
        // í˜„ì¬ ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ ìœ ì§€ë¥¼ ìœ„í•´ ì• ë‹ˆë©”ì´ì…˜ ì†ë„ë¥¼ 0ìœ¼ë¡œ ì„¤ì •
        animator.speed = 0;
        isPaused = true;
    
    }
## êµ¬í˜„ ì‹œ ì£¼ì˜ì 

- ì¤‘ë ¥ì€ ì‚¬ë‹¤ë¦¬ ìƒíƒœì—ì„œ ë¹„í™œì„±í™”í•´ì•¼ í•¨
- ì‚¬ë‹¤ë¦¬ ìœ„ì¹˜ì— ë§ê²Œ ìºë¦­í„° Xì¢Œí‘œ ì •ë ¬ í•„ìš”
- ì›€ì§ì„ ì„ê³„ê°’ì„ ì„¤ì •í•˜ì—¬ ë¯¸ì„¸í•œ ì…ë ¥ ë¬´ì‹œ
- ì‚¬ë‹¤ë¦¬ ìƒë‹¨/í•˜ë‹¨ì—ì„œì˜ ì „í™˜ ë¡œì§ êµ¬í˜„

## ìµœì í™” í¬ì¸íŠ¸

- ë¶ˆí•„ìš”í•œ ë””ë²„ê·¸ ì½”ë“œ ì œê±°
- íš¨ìœ¨ì ì¸ ì…ë ¥ ê°ì§€ ì‹œìŠ¤í…œ
- í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ ì—…ë°ì´íŠ¸

ì‚¬ë‹¤ë¦¬ë¥¼ íƒ€ëŠ” ë™ì•ˆ ë©ˆì¶°ìˆëŠ” ê²½ìš° ì• ë‹ˆë©”ì´ì…˜ì´ ì‘ë™í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ”ê²Œ ì–´ë ¤ì› ë‹¤. ê·¸ëŸ¬ë‚˜ í”„ë ˆì„ë‹¹ ì• ë‹ˆë©”ì´ì…˜ì„ ì •ì§€ì‹œí‚¤ê³  ì›€ì§ì´ê¸° ì‹œì‘í•˜ë©´ ë‹¤ì‹œ í™œì„±í™” í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì´ë¥¼ í•´ê²°í–ˆë‹¤.

ë‹¤ìŒì—ëŠ” í´ë¼ì„ë¹™ ìƒíƒœì¸ê²½ìš°ì— ì½œë¼ì´ë”ë¥¼ ë¬´ì‹œí•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ í”Œë«í¼ìœ„ë¥¼ ë„˜ë‚˜ë“¤ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë³´ë ¤ê³ í•œë‹¤.

