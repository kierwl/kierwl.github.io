---
layout: single
comments: true
title: "상호작용 만들기2 "
categories: TIL
---





### 📆 오늘의 TIL (Today I Learned)

---



#### 1.탈것 구현해보기

---

저번에 상호작용을 구현해 보았는데 이번에는 상호작용을 활용하여 탈것을 구현해 보려고 한다.

- 탑승 오브젝트는 플레이어와 마찬가지로 이동할 수있어야함
- 탑승물마다 스탯보너스가 달라져야함
- 플레이어가 탑승후 카메라가 탑승 오브젝트를 따라가야함
- 플레이어의 모습이 보이면 좋음 < 아직구현했음...



#### 2. 인터페이스 상속

---

```
public class Rideable : MonoBehaviour, IInteractable
{
    [SerializeField] private Transform seatPosition;  
    [SerializeField] private GameObject interactUI; // ✅ UI 오브젝트 참조 추가

    private GameObject player;
    private RideableController rideableController; //탑승물 조작
    private bool isRiding = false;
    private CinemachineVirtualCamera virtualCamera;
    private Rigidbody playerRigidbody;

    void Start()
    {
        player = GameObject.FindGameObjectWithTag("Player");
        rideableController = GetComponent<RideableController>();
        virtualCamera = FindObjectOfType<CinemachineVirtualCamera>();  
        playerRigidbody = player.GetComponent<Rigidbody>();
    }
```

상호작용가능한 대상의 태그가 플레이어인 경우만 탑승가능

```
private void EnterRide()
    {
        isRiding = true;
        player.transform.position = seatPosition.position; 
        rideableController.SetRiding(true);

        // ✅ UI 비활성화
        if (interactUI != null)
            interactUI.SetActive(false);

        // ✅ 플레이어 물리 효과 비활성화
        playerRigidbody.isKinematic = true;
        player.GetComponent<Collider>().enabled = false;

        // ✅ 카메라 변경
        virtualCamera.Follow = transform;
        virtualCamera.LookAt = transform;
    }

    private void ExitRide()
    {
        isRiding = false;
        player.transform.position = transform.position + Vector3.right * 2;  
        rideableController.SetRiding(false);

        // ✅ UI 다시 활성화
        if (interactUI != null)
            interactUI.SetActive(true);

        // ✅ 플레이어 물리 효과 다시 활성화
        playerRigidbody.isKinematic = false;
        player.GetComponent<Collider>().enabled = true;

        // ✅ 카메라 다시 플레이어로 변경
        virtualCamera.Follow = player.transform;
        virtualCamera.LookAt = player.transform;
    }
```

시네머신을 사용해서 탑승시 카메라의 대상을 변경해주었다.

플레이어가 활성화가 되면 오브젝트가 플레이어랑 같이 움직이는 상황이 발생해서

플레이어를 비활성화 하고 탈것 오브젝트에 상호작용 기능을 추가하는것으로

타고내리는 기능을 추가하였다.
